{"name":"Tapestry","tagline":"Tapestry","body":"# Tapestry: A Network Complexity Analyzer\r\n\r\n## Overview\r\n\r\nTapestry is a system that measures network complexity by capturing Domain\r\nName System (DNS) endpoint interaction data via OpenFlow enabled network\r\ntaps in front of one or more of an organization's internal recursive DNS\r\nservers.\r\n\r\nNetwork interaction data is collected over time, distinct organizational\r\nactivities are detected, and a Network Complexity Index (NCI) is computed\r\non-line.  The NCI can be viewed and graphed in near real-time via a built\r\nin Web based interface.\r\n\r\n## Requirements\r\n\r\nTapestry requires:\r\n\r\n* Erlang/OTP distributed computing platform, available from\r\n    [Erlang.org](http://www.erlang.org/download.html)\r\n* One or more servers running the Erlang to aggregate the data and \r\n    calculate the NCI.\r\n* One or more internal recursive DNS servers to provide the raw data feeds\r\n* One or more OpenFlow enabled switches or network white boxes with at\r\n    least 3 ports to act as network taps. (or you can install LINC on\r\n    the network white boxes)\r\n* Network cabling and access to install the taps inline in front of\r\n    the internal recursive DNS servers\r\n* Network connectivity between the taps and machine or cluster running \r\n    the Erlang/OTP\r\n\r\n## Installation\r\n\r\nDownload and compile the Tapestry collector\r\n\r\n```bash\r\n% git clone https://github.com/FlowForwarding/tapestry\r\n% cd tapestry\r\n% make\r\n```\r\n\r\nIf required, download and compile LINC for the network switches\r\n\r\n```bash\r\n% git clone https://github.com/FlowForwarding/LINC-Switch.git\r\n```\r\n\r\nYou will need to create ```$LINC_ROOT/rel/files/sys.config``` file by adding the correspond ports and adding the Tapestry\r\nController.  There are 2 ports needed for Tapestry Controller and hence, we can generate a sys.config file by running the below command .\r\n```bash\r\n% cd $LINC_ROOT\r\n% scripts/config_gen -s 0 eth1 eth2 eth3 eth4 -c tcp:10.10.10.75:6633 tcp:10.10.10.75:6634 -o rel/files/sys.config\r\n% make compile\r\n% make rel\r\n```\r\n\r\n## Deployment\r\n\r\nAn example deployment diagram: ![alt text][Illustration]\r\n\r\n[Illustration]: https://raw.github.com/FlowForwarding/tapestry/master/docs/images/tapestry_deployment.jpg \"Tapestry deployment\"\r\n\r\n## Configure Tapestry Collector\r\nTapestry Collector Configuration file is located in\r\n$TAPESTRY_ROOT/tapestry.config file\r\n\r\nIn the below file, LINC Switch IP Address is 10.10.10.149 and DNS Server\r\nconnected to Port 1 (as per LINC Switch's sys.config file) of the LINC\r\nSwitch is 10.10.10.10.  Port 2 (as per LINC Switch's sys.config file) of\r\nthe LINC Switch is connected to the Top of the Rack switch to act as a\r\nreceptor for DNS Queries and responses.\r\n\r\n```erlang\r\n{ofdps,[{ofdp,{ip_addr,{10,10,10,149}},\r\n              {dns_port,1},\r\n              {client_port,2},\r\n              {dns_ips,[{10,10,10,10}]}\r\n         }]}.\r\n```\r\n\r\n\r\n## Running Tapestry\r\n\r\n### First Install Flows on the Switch and make sure everything is working\r\n```erlang\r\n# erl -pa ebin\r\n> tap_loom:start().\r\n> tap_loom:config().\r\n> q().\r\n```\r\n\r\nNow test connectivity.  If the DNS Server IP address connected to Port 1 of the LINC Switch is 10.10.10.10, then\r\n```bash\r\n# dig @10.10.10.10 flowforwarding.org\r\n```\r\nNow you can start Tapestry Collector\r\n```erlang\r\n# erl -pa ebin\r\n> tapestry:start().\r\n```\r\n\r\nUsing a browser, go to URL - http://<tapestry_collector_hostname:28080/nci.html to see NCI graph and number.\r\n\r\n## Additional Documentation\r\n>1. Technical White Paper: “[A Network Complexity Index for Networks of Networks] (http://www.flowforwarding.org/nci-article)” by Stuart Bailey and Robert L. Grossman\r\n>2. NCI White Paper: [Tapestry for Tracking Network Complexity Index (NCI)] (http://www.infoblox.com/downloads/resources/network-complexity/download)\r\n>3. Tapestry [Architecture Details] (https://github.com/FlowForwarding/tapestry/blob/master/docs/Tapestry.pdf?raw=true)\r\n","google":"UA-45275436-1","note":"Don't delete this file! It's used internally to help with page regeneration."}